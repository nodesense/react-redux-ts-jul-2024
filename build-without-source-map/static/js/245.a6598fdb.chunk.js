"use strict";(self.webpackChunkproduct_app=self.webpackChunkproduct_app||[]).push([[245],{245:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var n=s(43);class r{constructor(t,e,s,n){this.id=t,this.name=e,this.qty=s,this.price=n}}var c=s(579);const d=t=>{console.log("CartItem render ",t.item);const{item:e,dispatch:s,updateItemInCart:n}=t;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name}),(0,c.jsx)("td",{children:e.price}),(0,c.jsx)("td",{children:e.qty}),(0,c.jsx)("td",{children:e.price*e.qty}),(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("button",{onClick:()=>n(e.id,e.qty+1),children:" +1 "})," "]}),(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("button",{onClick:()=>s({type:"REMOVE_ITEM",id:e.id}),children:" X "})," "]})]})},i=(0,n.memo)(d),l=t=>{let{items:e,dispatch:s,updateItemInCart:n}=t;return console.log("CartList render"),(0,c.jsxs)("table",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:"Name"}),(0,c.jsx)("td",{children:"Price"}),(0,c.jsx)("td",{children:"Qty"}),(0,c.jsx)("td",{children:"Amount"}),(0,c.jsx)("td",{children:"Update"}),(0,c.jsx)("td",{children:"Delete"})]}),(0,c.jsx)("tbody",{children:e.map((t=>(0,c.jsx)(i,{item:t,updateItemInCart:n,dispatch:s},t.id)))})]})},a=(0,n.memo)(l);var o=s(673);const h={items:[new r(1,"test",1,100)],amount:0,totalItems:0},u=t=>{let e=0,s=0;for(let n of t)e+=n.price*n.qty,s+=n.qty;return{amount:e,totalItems:s}};function m(t,e){switch(console.log("cartReducer called ",t,e),e.type){case"ADD_ITEM":{const s=[...t.items,e.item],{amount:n,totalItems:r}=u(s);return{items:s,amount:n,totalItems:r}}case"REMOVE_ITEM":{const s=t.items.filter((t=>t.id!=e.id));return{items:s,...u(s)}}default:return t}}const p=()=>{console.log("Cart Render");const[t,e]=(0,n.useReducer)(m,h),[s,d]=(0,n.useState)(!0),i=()=>{const t=function(){const t=Math.ceil(1e5*Math.random());return new r(t,"Generated ".concat(t),1,Math.ceil(100*Math.random()))}();e({type:"ADD_ITEM",item:t})},l=(0,n.useCallback)(((t,s)=>{console.log("updateItem in Cart called",t,s),e({type:"UPDATE_ITEM",id:t,qty:s})}),[]);return(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Cart"}),(0,c.jsx)("button",{onClick:()=>d(!s),children:"Flag"}),(0,c.jsx)("button",{onClick:()=>i(),children:"Add Item"}),(0,c.jsx)(a,{items:t.items,dispatch:e,updateItemInCart:l}),(0,c.jsx)(o.sM.Consumer,{children:t=>(0,c.jsxs)("button",{children:["  ",t.checkout," "]})})]})}}}]);
//# sourceMappingURL=245.a6598fdb.chunk.js.map